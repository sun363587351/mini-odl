<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_202) on Wed Aug 14 10:35:04 CST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsyncWriteTransaction (controller-docs 0.11.0-SNAPSHOT API)</title>
<meta name="date" content="2019-08-14">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncWriteTransaction (controller-docs 0.11.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":38,"i1":38,"i2":38,"i3":50};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],4:["t3","抽象方法"],16:["t5","默认方法"],32:["t6","已过时的方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/AsyncWriteTransaction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/DataReader.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" target="_top">框架</a></li>
<li><a href="AsyncWriteTransaction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opendaylight.controller.md.sal.common.api.data</div>
<h2 title="接口 AsyncWriteTransaction" class="title">接口 AsyncWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">类型参数:</span></dt>
<dd><code>P</code> - Type of path (subtree identifier), which represents location in
            tree</dd>
<dd><code>D</code> - Type of data (payload), which represents data payload</dd>
</dl>
<dl>
<dt>所有超级接口:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncTransaction</a>&lt;P,D&gt;, org.opendaylight.yangtools.concepts.Identifiable&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a>&gt;</dd>
</dl>
<dl>
<dt>所有已知子接口:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncReadWriteTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/api/DOMDataReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.api中的接口">DOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/api/DOMDataWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.api中的接口">DOMDataWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的接口">ReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/WriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的接口">WriteTransaction</a></dd>
</dl>
<dl>
<dt>所有已知实现类:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/spi/ForwardingDOMDataReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.spi中的类">ForwardingDOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/spi/ForwardingDOMDataWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.spi中的类">ForwardingDOMDataWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ForwardingReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的类">ForwardingReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ForwardingWriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的类">ForwardingWriteTransaction</a></dd>
</dl>
<hr>
<div class="block"><span class="deprecatedLabel">已过时。</span></div>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public interface <span class="typeNameLabel">AsyncWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</span>
extends <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncTransaction</a>&lt;P,D&gt;</pre>
<div class="block">Write transaction provides mutation capabilities for a data tree.

 <p>
 Initial state of write transaction is a stable snapshot of the current data tree.
 The state is captured when the transaction is created and its state and underlying
 data tree are not affected by other concurrently running transactions.

 <p>
 Write transactions are isolated from other concurrent write transactions. All
 writes are local to the transaction and represent only a proposal of state
 change for the data tree and it is not visible to any other concurrently running
 transaction.

 <p>
 Applications make changes to the local data tree in the transaction by via the
 <b>put</b>, <b>merge</b>, and <b>delete</b> operations.

 <h2>Put operation</h2>
 Stores a piece of data at a specified path. This acts as an add / replace
 operation, which is to say that whole subtree will be replaced by the
 specified data.

 <p>
 Performing the following put operations:

 <pre>
 1) container { list [ a ] }
 2) container { list [ b ] }
 </pre>

 <p>
 will result in the following data being present:

 <pre>
 container { list [ b ] }
 </pre>
 <h2>Merge operation</h2>
 Merges a piece of data with the existing data at a specified path. Any pre-existing data
 which is not explicitly overwritten will be preserved. This means that if you store a container,
 its child lists will be merged.

 <p>
 Performing the following merge operations:

 <pre>
 1) container { list [ a ] }
 2) container { list [ b ] }
 </pre>

 <p>
 will result in the following data being present:

 <pre>
 container { list [ a, b ] }
 </pre>

 <p>
 This also means that storing the container will preserve any
 augmentations which have been attached to it.

 <h2>Delete operation</h2>
 Removes a piece of data from a specified path.

 <p>
 After applying changes to the local data tree, applications publish the changes proposed in the
 transaction by calling <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>submit()</code></a> on the transaction. This seals the transaction
 (preventing any further writes using this transaction) and submits it to be
 processed and applied to global conceptual data tree.

 <p>
 The transaction commit may fail due to a concurrent transaction modifying and committing data in
 an incompatible way. See <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>submit()</code></a> for more concrete commit failure examples.

 <p>
 <b>Implementation Note:</b> This interface is not intended to be implemented
 by users of MD-SAL, but only to be consumed by them.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.opendaylight.yangtools.util.concurrent.ExceptionMapper&lt;<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类">TransactionCommitFailedException</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#SUBMIT_EXCEPTION_MAPPER">SUBMIT_EXCEPTION_MAPPER</a></span></code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">抽象方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">默认方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">已过时的方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#cancel--">cancel</a></span>()</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Cancels the transaction.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>@NonNull <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/FluentFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口">FluentFuture</a>&lt;? extends org.opendaylight.mdsal.common.api.CommitInfo&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit--">commit</a></span>()</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Submits this transaction to be asynchronously applied to update the logical data tree.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#delete-org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType-P-">delete</a></span>(<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/LogicalDatastoreType.html" title="org.opendaylight.controller.md.sal.common.api.data中的枚举">LogicalDatastoreType</a>&nbsp;store,
      <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="AsyncWriteTransaction中的类型参数">P</a>&nbsp;path)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Removes a piece of data from specified path.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>default <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/CheckedFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口">CheckedFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>,<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类">TransactionCommitFailedException</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--">submit</a></span>()</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;
<div class="block"><span class="deprecationComment">Use <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit--"><code>commit()</code></a> instead.</span></div>
</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.opendaylight.controller.md.sal.common.api.data.AsyncTransaction">
<!--   -->
</a>
<h3>从接口继承的方法&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html#getIdentifier--">getIdentifier</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="SUBMIT_EXCEPTION_MAPPER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SUBMIT_EXCEPTION_MAPPER</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
static final&nbsp;org.opendaylight.yangtools.util.concurrent.ExceptionMapper&lt;<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类">TransactionCommitFailedException</a>&gt; SUBMIT_EXCEPTION_MAPPER</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">This only exists for reuse by the deprecated <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>submit()</code></a> method and is not intended for general use.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="cancel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancel</h4>
<pre>boolean&nbsp;cancel()</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Cancels the transaction.

 <p>
 Transactions can only be cancelled if it's state is new or submitted.

 <p>
 Invoking cancel() on a failed or cancelled transaction will have no effect, and transaction
 is considered cancelled.

 <p>
 Invoking cancel() on a finished transaction (future returned by <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>submit()</code></a> already completed will always
 fail (return false).</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>false</code> if the task could not be cancelled, typically because it has already completed normally
         <code>true</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="delete-org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType-org.opendaylight.yangtools.concepts.Path-">
<!--   -->
</a><a name="delete-org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType-P-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>void&nbsp;delete(<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/LogicalDatastoreType.html" title="org.opendaylight.controller.md.sal.common.api.data中的枚举">LogicalDatastoreType</a>&nbsp;store,
            <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="AsyncWriteTransaction中的类型参数">P</a>&nbsp;path)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Removes a piece of data from specified path. This operation does not fail
 if the specified path does not exist.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>store</code> - Logical data store which should be modified</dd>
<dd><code>path</code> - Data object path</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if the transaction as already been submitted or cancelled</dd>
</dl>
</li>
</ul>
<a name="submit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
default&nbsp;<a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/CheckedFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口">CheckedFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>,<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类">TransactionCommitFailedException</a>&gt;&nbsp;submit()</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;<span class="deprecationComment">Use <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit--"><code>commit()</code></a> instead.</span></div>
<div class="block">Submits this transaction to be asynchronously applied to update the logical data tree.
 The returned CheckedFuture conveys the result of applying the data changes.

 <p>
 <b>Note:</b> It is strongly recommended to process the CheckedFuture result in an asynchronous
 manner rather than using the blocking get() method. See example usage below.

 <p>
 This call logically seals the transaction, which prevents the client from
 further changing data tree using this transaction. Any subsequent calls to
 <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#delete-org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType-P-"><code>delete(LogicalDatastoreType, Path)</code></a> will fail with
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口"><code>IllegalStateException</code></a>.

 <p>
 The transaction is marked as submitted and enqueued into the data store back-end for processing.

 <p>
 Whether or not the commit is successful is determined by versioning
 of the data tree and validation of registered commit participants
 (<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncConfigurationCommitHandler.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><code>AsyncConfigurationCommitHandler</code></a>) if the transaction changes the data tree.

 <p>
 The effects of a successful commit of data depends on data tree change listeners and commit participants
 (<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncConfigurationCommitHandler.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><code>AsyncConfigurationCommitHandler</code></a>) that are registered with the data broker.

 <h3>Example usage:</h3>
 <pre>
  private void doWrite( final int tries ) {
      WriteTransaction writeTx = dataBroker.newWriteOnlyTransaction();

      MyDataObject data = ...;
      InstanceIdentifier&lt;MyDataObject&gt; path = ...;
      writeTx.put( LogicalDatastoreType.OPERATIONAL, path, data );

      Futures.addCallback( writeTx.submit(), new FutureCallback&lt;Void&gt;() {
          public void onSuccess( Void result ) {
              // succeeded
          }

          public void onFailure( Throwable t ) {
              if( t instanceof OptimisticLockFailedException ) {
                  if( ( tries - 1 ) &gt; 0 ) {
                      // do retry
                      doWrite( tries - 1 );
                  } else {
                      // out of retries
                  }
              } else {
                  // failed due to another type of TransactionCommitFailedException.
              }
          } );
 }
 ...
 doWrite( 2 );
 </pre>
 <h2>Failure scenarios</h2>

 <p>
 Transaction may fail because of multiple reasons, such as
 <ul>
 <li>Another transaction finished earlier and modified the same node in a
 non-compatible way (see below). In this case the returned future will fail with an
 <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/OptimisticLockFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类"><code>OptimisticLockFailedException</code></a>. It is the responsibility of the
 caller to create a new transaction and submit the same modification again in
 order to update data tree. <i><b>Warning</b>: In most cases, retrying after an
 OptimisticLockFailedException will result in a high probability of success.
 However, there are scenarios, albeit unusual, where any number of retries will
 not succeed. Therefore it is strongly recommended to limit the number of retries (2 or 3)
 to avoid an endless loop.</i>
 </li>
 <li>Data change introduced by this transaction did not pass validation by
 commit handlers or data was incorrectly structured. Returned future will
 fail with a <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/DataValidationFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类"><code>DataValidationFailedException</code></a>. User should not retry to
 create new transaction with same data, since it probably will fail again.
 </li>
 </ul>

 <h3>Change compatibility</h3>

 <p>
 There are several sets of changes which could be considered incompatible
 between two transactions which are derived from same initial state.
 Rules for conflict detection applies recursively for each subtree
 level.

 <h4>Change compatibility of leafs, leaf-list items</h4>

 <p>
 Following table shows  state changes and failures between two concurrent transactions,
 which are based on same initial state, Tx 1 completes successfully
 before Tx 2 is submitted.

 <table>
 <caption>Data store state changes</caption>
 <tr><th>Initial state</th><th>Tx 1</th><th>Tx 2</th><th>Result</th></tr>
 <tr><td>Empty</td><td>put(A,1)</td><td>put(A,2)</td><td>Tx 2 will fail, state is A=1</td></tr>
 <tr><td>Empty</td><td>put(A,1)</td><td>merge(A,2)</td><td>A=2</td></tr>

 <tr><td>Empty</td><td>merge(A,1)</td><td>put(A,2)</td><td>Tx 2 will fail, state is A=1</td></tr>
 <tr><td>Empty</td><td>merge(A,1)</td><td>merge(A,2)</td><td>A=2</td></tr>


 <tr><td>A=0</td><td>put(A,1)</td><td>put(A,2)</td><td>Tx 2 will fail, A=1</td></tr>
 <tr><td>A=0</td><td>put(A,1)</td><td>merge(A,2)</td><td>A=2</td></tr>
 <tr><td>A=0</td><td>merge(A,1)</td><td>put(A,2)</td><td>Tx 2 will fail, A=1</td></tr>
 <tr><td>A=0</td><td>merge(A,1)</td><td>merge(A,2)</td><td>A=2</td></tr>

 <tr><td>A=0</td><td>delete(A)</td><td>put(A,2)</td><td>Tx 2 will fail, A does not exists</td></tr>
 <tr><td>A=0</td><td>delete(A)</td><td>merge(A,2)</td><td>A=2</td></tr>
 </table>

 <h4>Change compatibility of subtrees</h4>

 <p>
 Following table shows  state changes and failures between two concurrent transactions,
 which are based on same initial state, Tx 1 completes successfully
 before Tx 2 is submitted.

 <table>
 <caption>Data store state changes</caption>
 <tr><th>Initial state</th><th>Tx 1</th><th>Tx 2</th><th>Result</th></tr>

 <tr><td>Empty</td><td>put(TOP,[])</td><td>put(TOP,[])</td><td>Tx 2 will fail, state is TOP=[]</td></tr>
 <tr><td>Empty</td><td>put(TOP,[])</td><td>merge(TOP,[])</td><td>TOP=[]</td></tr>

 <tr><td>Empty</td><td>put(TOP,[FOO=1])</td><td>put(TOP,[BAR=1])</td><td>Tx 2 will fail, state is TOP=[FOO=1]
 </td></tr>
 <tr><td>Empty</td><td>put(TOP,[FOO=1])</td><td>merge(TOP,[BAR=1])</td><td>TOP=[FOO=1,BAR=1]</td></tr>

 <tr><td>Empty</td><td>merge(TOP,[FOO=1])</td><td>put(TOP,[BAR=1])</td><td>Tx 2 will fail, state is TOP=[FOO=1]
 </td></tr>
 <tr><td>Empty</td><td>merge(TOP,[FOO=1])</td><td>merge(TOP,[BAR=1])</td><td>TOP=[FOO=1,BAR=1]</td></tr>

 <tr><td>TOP=[]</td><td>put(TOP,[FOO=1])</td><td>put(TOP,[BAR=1])</td><td>Tx 2 will fail, state is TOP=[FOO=1]
 </td></tr>
 <tr><td>TOP=[]</td><td>put(TOP,[FOO=1])</td><td>merge(TOP,[BAR=1])</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>merge(TOP,[FOO=1])</td><td>put(TOP,[BAR=1])</td><td>Tx 2 will fail, state is TOP=[FOO=1]
 </td></tr>
 <tr><td>TOP=[]</td><td>merge(TOP,[FOO=1])</td><td>merge(TOP,[BAR=1])</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>delete(TOP)</td><td>put(TOP,[BAR=1])</td><td>Tx 2 will fail, state is empty store
 </td></tr>
 <tr><td>TOP=[]</td><td>delete(TOP)</td><td>merge(TOP,[BAR=1])</td><td>state is TOP=[BAR=1]</td></tr>

 <tr><td>TOP=[]</td><td>put(TOP/FOO,1)</td><td>put(TOP/BAR,1])</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>put(TOP/FOO,1)</td><td>merge(TOP/BAR,1)</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>merge(TOP/FOO,1)</td><td>put(TOP/BAR,1)</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>merge(TOP/FOO,1)</td><td>merge(TOP/BAR,1)</td><td>state is TOP=[FOO=1,BAR=1]</td></tr>
 <tr><td>TOP=[]</td><td>delete(TOP)</td><td>put(TOP/BAR,1)</td><td>Tx 2 will fail, state is empty store</td></tr>
 <tr><td>TOP=[]</td><td>delete(TOP)</td><td>merge(TOP/BAR,1]</td><td>Tx 2 will fail, state is empty store
 </td></tr>

 <tr><td>TOP=[FOO=1]</td><td>put(TOP/FOO,2)</td><td>put(TOP/BAR,1)</td><td>state is TOP=[FOO=2,BAR=1]</td></tr>
 <tr><td>TOP=[FOO=1]</td><td>put(TOP/FOO,2)</td><td>merge(TOP/BAR,1)</td><td>state is TOP=[FOO=2,BAR=1]</td></tr>
 <tr><td>TOP=[FOO=1]</td><td>merge(TOP/FOO,2)</td><td>put(TOP/BAR,1)</td><td>state is TOP=[FOO=2,BAR=1]</td></tr>
 <tr><td>TOP=[FOO=1]</td><td>merge(TOP/FOO,2)</td><td>merge(TOP/BAR,1)</td><td>state is TOP=[FOO=2,BAR=1]
 </td></tr>
 <tr><td>TOP=[FOO=1]</td><td>delete(TOP/FOO)</td><td>put(TOP/BAR,1)</td><td>state is TOP=[BAR=1]</td></tr>
 <tr><td>TOP=[FOO=1]</td><td>delete(TOP/FOO)</td><td>merge(TOP/BAR,1]</td><td>state is TOP=[BAR=1]</td></tr>
 </table>


 <h3>Examples of failure scenarios</h3>

 <h4>Conflict of two transactions</h4>

 <p>
 This example illustrates two concurrent transactions, which derived from
 same initial state of data tree and proposes conflicting modifications.

 <pre>
 txA = broker.newWriteTransaction(); // allocates new transaction, data tree is empty
 txB = broker.newWriteTransaction(); // allocates new transaction, data tree is empty

 txA.put(CONFIGURATION, PATH, A);    // writes to PATH value A
 txB.put(CONFIGURATION, PATH, B)     // writes to PATH value B

 ListenableFuture futureA = txA.submit(); // transaction A is sealed and submitted
 ListenebleFuture futureB = txB.submit(); // transaction B is sealed and submitted
 </pre>

 <p>
 Commit of transaction A will be processed asynchronously and data tree
 will be updated to contain value <code>A</code> for <code>PATH</code>.
 Returned <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/ListenableFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口"><code>ListenableFuture</code></a> will successfully complete once
 state is applied to data tree.

 <p>
 Commit of Transaction B will fail, because previous transaction also
 modified path in a concurrent way. The state introduced by transaction B
 will not be applied. Returned <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/ListenableFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口"><code>ListenableFuture</code></a> object will fail
 with <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/OptimisticLockFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类"><code>OptimisticLockFailedException</code></a> exception, which indicates to
 client that concurrent transaction prevented the submitted transaction from being
 applied.
 <br></div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a CheckFuture containing the result of the commit. The Future blocks until the
         commit operation is complete. A successful commit returns nothing. On failure,
         the Future will fail with a <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类"><code>TransactionCommitFailedException</code></a> or an exception
         derived from TransactionCommitFailedException.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if the transaction is not new</dd>
</dl>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>commit</h4>
<pre>@NonNull <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/FluentFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口">FluentFuture</a>&lt;? extends org.opendaylight.mdsal.common.api.CommitInfo&gt;&nbsp;commit()</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">Submits this transaction to be asynchronously applied to update the logical data tree. The returned
 <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/FluentFuture.html?is-external=true" title="com.google.common.util.concurrent中的类或接口"><code>FluentFuture</code></a> conveys the result of applying the data changes.

 <p>
 This call logically seals the transaction, which prevents the client from further changing the data tree using
 this transaction. Any subsequent calls to <code>put(LogicalDatastoreType, Path, Object)</code>,
 <code>merge(LogicalDatastoreType, Path, Object)</code>, <code>delete(LogicalDatastoreType, Path)</code> will fail
 with <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口"><code>IllegalStateException</code></a>. The transaction is marked as submitted and enqueued into the data store
 back-end for processing.

 <p>
 Whether or not the commit is successful is determined by versioning of the data tree and validation of registered
 commit participants if the transaction changes the data tree.

 <p>
 The effects of a successful commit of data depends on listeners and commit participants that are registered with
 the data broker.

 <p>
 A successful commit produces implementation-specific <code>CommitInfo</code> structure, which is used to communicate
 post-condition information to the caller. Such information can contain commit-id, timing information or any
 other information the implementation wishes to share.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a FluentFuture containing the result of the commit information. The Future blocks until the commit
         operation is complete. A successful commit returns nothing. On failure, the Future will fail with a
         <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/TransactionCommitFailedException.html" title="org.opendaylight.controller.md.sal.common.api.data中的类"><code>TransactionCommitFailedException</code></a> or an exception derived from TransactionCommitFailedException.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if the transaction is already committed or was canceled.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/AsyncWriteTransaction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/DataReader.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" target="_top">框架</a></li>
<li><a href="AsyncWriteTransaction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.opendaylight.org">OpenDaylight</a>. All rights reserved.</small></p>
</body>
</html>
