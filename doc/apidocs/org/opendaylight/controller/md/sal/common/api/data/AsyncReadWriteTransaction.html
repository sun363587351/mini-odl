<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_202) on Wed Aug 14 10:35:04 CST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsyncReadWriteTransaction (controller-docs 0.11.0-SNAPSHOT API)</title>
<meta name="date" content="2019-08-14">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncReadWriteTransaction (controller-docs 0.11.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/AsyncReadWriteTransaction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncReadWriteTransaction.html" target="_top">框架</a></li>
<li><a href="AsyncReadWriteTransaction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li>方法</li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li>方法</li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opendaylight.controller.md.sal.common.api.data</div>
<h2 title="接口 AsyncReadWriteTransaction" class="title">接口 AsyncReadWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">类型参数:</span></dt>
<dd><code>P</code> - Type of path (subtree identifier), which represents location in
            tree</dd>
<dd><code>D</code> - Type of data (payload), which represents data payload</dd>
</dl>
<dl>
<dt>所有超级接口:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncReadTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncWriteTransaction</a>&lt;P,D&gt;, org.opendaylight.yangtools.concepts.Identifiable&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a>&gt;</dd>
</dl>
<dl>
<dt>所有已知子接口:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/api/DOMDataReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.api中的接口">DOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的接口">ReadWriteTransaction</a></dd>
</dl>
<dl>
<dt>所有已知实现类:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/spi/ForwardingDOMDataReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.dom.spi中的类">ForwardingDOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ForwardingReadWriteTransaction.html" title="org.opendaylight.controller.md.sal.binding.api中的类">ForwardingReadWriteTransaction</a></dd>
</dl>
<hr>
<div class="block"><span class="deprecatedLabel">已过时。</span></div>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public interface <span class="typeNameLabel">AsyncReadWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</span>
extends <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncReadTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncWriteTransaction</a>&lt;P,D&gt;</pre>
<div class="block">Transaction enabling a client to have a combined read/write capabilities.

 <p>
 The initial state of the write transaction is stable snapshot of current data tree
 state captured when transaction was created and it's state and underlying
 data tree are not affected by other concurrently running transactions.

 <p>
 Write transactions are isolated from other concurrent write transactions. All
 writes are local to the transaction and represents only a proposal of state
 change for data tree and it is not visible to any other concurrently running
 transactions.

 <p>
 Applications publish the changes proposed in the transaction by calling <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>AsyncWriteTransaction.submit()</code></a>
 on the transaction. This seals the transaction
 (preventing any further writes using this transaction) and submits it to be
 processed and applied to global conceptual data tree.

 <p>
 The transaction commit may fail due to a concurrent transaction modifying and committing data in
 an incompatible way. See <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--"><code>AsyncWriteTransaction.submit()</code></a> for more concrete commit failure examples.

 <b>Implementation Note:</b> This interface is not intended to be implemented
 by users of MD-SAL, but only to be consumed by them.

 <h2>Examples</h2>

 <h3>Transaction local state</h3>

 <p>
 Let assume initial state of data tree for <code>PATH</code> is <code>A</code>
 .

 <pre>
 txWrite = broker.newReadWriteTransaction(); // concurrent write transaction

 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional containing A
 txWrite.put(OPERATIONAL,PATH,B);            // writes B to PATH
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 txWrite.commit().get();                     // data tree is updated, PATH contains B

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B
 </pre>

 <p>
 As you could see read-write transaction provides capabilities as
 <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><code>AsyncWriteTransaction</code></a> but also allows for reading proposed changes as
 if they already happened.

 <h3>Transaction isolation (read transaction, read-write transaction)</h3> Let
 assume initial state of data tree for <code>PATH</code> is <code>A</code>.

 <pre>
 txRead = broker.newReadOnlyTransaction();   // read Transaction is snapshot of data
 txWrite = broker.newReadWriteTransaction(); // concurrent write transaction

 txRead.read(OPERATIONAL,PATH).get();        // will return Optional containing A
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional containing A

 txWrite.put(OPERATIONAL,PATH,B);            // writes B to PATH
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 txRead.read(OPERATIONAL,PATH).get();        // concurrent read transaction still returns
                                             // Optional containing A

 txWrite.commit().get();                     // data tree is updated, PATH contains B
 txRead.read(OPERATIONAL,PATH).get();        // still returns Optional containing A

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B
 </pre>

 <h3>Transaction isolation (2 concurrent read-write transactions)</h3> Let
 assume initial state of data tree for <code>PATH</code> is <code>A</code>.

 <pre>
 tx1 = broker.newReadWriteTransaction(); // read Transaction is snapshot of data
 tx2 = broker.newReadWriteTransaction(); // concurrent write transaction

 tx1.read(OPERATIONAL,PATH).get();       // will return Optional containing A
 tx2.read(OPERATIONAL,PATH).get()        // will return Optional containing A

 tx2.put(OPERATIONAL,PATH,B);            // writes B to PATH
 tx2.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 tx1.read(OPERATIONAL,PATH).get();       // tx1 read-write transaction still sees Optional
                                         // containing A since is isolated from tx2
 tx1.put(OPERATIONAL,PATH,C);            // writes C to PATH
 tx1.read(OPERATIONAL,PATH).get()        // will return Optional Containing C

 tx2.read(OPERATIONAL,PATH).get()        // tx2 read-write transaction still sees Optional
                                         // containing B since is isolated from tx1

 tx2.commit().get();                     // data tree is updated, PATH contains B
 tx1.read(OPERATIONAL,PATH).get();       // still returns Optional containing C since is isolated from tx2

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B

 tx1.commit()                            // Will fail with OptimisticLockFailedException
                                         // which means concurrent transaction changed the same PATH

 </pre>

 <p>
 <b>Note:</b> examples contains blocking calls on future only to illustrate
 that action happened after other asynchronous action. Use of blocking call
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html?is-external=true#get--" title="java.util.concurrent中的类或接口"><code>Future.get()</code></a> is discouraged for most uses and you should
 use <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/Futures.html?is-external=true#addCallback-com.google.common.util.concurrent.ListenableFuture-com.google.common.util.concurrent.FutureCallback-java.util.concurrent.Executor-" title="com.google.common.util.concurrent中的类或接口"><code>Futures.addCallback(com.google.common.util.concurrent.ListenableFuture,
 com.google.common.util.concurrent.FutureCallback, java.util.concurrent.Executor)</code></a>
 or other functions from <a href="https://guava.dev/releases/25.1-jre/api/docs/com/google/common/util/concurrent/Futures.html?is-external=true" title="com.google.common.util.concurrent中的类或接口"><code>Futures</code></a> to
 register more specific listeners.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><code>AsyncReadTransaction</code></a>, 
<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><code>AsyncWriteTransaction</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.opendaylight.controller.md.sal.common.api.data.AsyncWriteTransaction">
<!--   -->
</a>
<h3>从接口继承的字段&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncWriteTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#SUBMIT_EXCEPTION_MAPPER">SUBMIT_EXCEPTION_MAPPER</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.opendaylight.controller.md.sal.common.api.data.AsyncWriteTransaction">
<!--   -->
</a>
<h3>从接口继承的方法&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncWriteTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#cancel--">cancel</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit--">commit</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#delete-org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType-P-">delete</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit--">submit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.opendaylight.controller.md.sal.common.api.data.AsyncTransaction">
<!--   -->
</a>
<h3>从接口继承的方法&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口">AsyncTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html#getIdentifier--">getIdentifier</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/AsyncReadWriteTransaction.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="org.opendaylight.controller.md.sal.common.api.data中的接口"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncReadWriteTransaction.html" target="_top">框架</a></li>
<li><a href="AsyncReadWriteTransaction.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li>方法</li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li>方法</li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="https://www.opendaylight.org">OpenDaylight</a>. All rights reserved.</small></p>
</body>
</html>
